<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Concept Map Library | Saveetha Calculator</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- EmailJS SDK -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2168720985223352"
     crossorigin="anonymous"></script>

</head>
<body>
  <nav class="top-nav">
    <div class="logo">
      <span class="icon">üßÆ</span>
      Saveetha A to Z
    </div>
    <div class="nav-links">
      <a href="#submit-request" class="nav-link">Contact Us</a>
      <a href="#" class="nav-link">Features</a>
      <a href="#" class="nav-link">Tools</a>
    </div>
  </nav>

  <!-- Features Dashboard -->
  <nav class="features-dashboard">
    <ul class="dashboard-list">
      <li><a href="#contributors" class="dashboard-link">Contributors</a></li>
      <li><a href="#announcements" class="dashboard-link">Announcements</a></li>
      <li><a href="#cgpa-calculator" class="dashboard-link">CGPA Calculator</a></li>
      <li><a href="#attendance-calculator" class="dashboard-link">Attendance Calculator</a></li>
      <li><a href="#assignment-tutorials" class="dashboard-link">Assignment & Tutorials</a></li>
      <li><a href="#faculty-section" class="dashboard-link">Call Faculty</a></li>
      <li><a href="#submit-request" class="dashboard-link">Submit Request</a></li>
    </ul>
  </nav>

  <div class="container">

    <!-- Contributors Section -->
    <section class="announcement-section" id="contributors">
      <header class="section-hero">
        <h2 class="section-title">Contributors</h2>
        <p class="section-subtitle">Thanks to our amazing community for uploading and sharing resources! üôè</p>
      </header>
      <div id="contributorGrid" class="grid"></div>
    </section>

    <!-- Announcements Section -->
    <section class="announcement-section" id="announcements">
      <header class="section-hero">
        <h2 class="section-title">Announcements</h2>
        <p class="section-subtitle">Stay updated with the latest news and updates from Saveetha! üì∞</p>
      </header>
      <div id="announcementGrid" class="grid"></div>
    </section>

    <!-- CGPA Calculator Section -->
    <section class="calculator-section" id="cgpa-calculator">
      <header class="section-hero">
        <h2 class="section-title">CGPA Calculator</h2>
        <p class="section-subtitle">Track your academic progress and boost your grades with ease! üöÄ</p>
      </header>

      <div class="calculator">
        <div class="input-group">
          <label>Number of S Grades:</label>
          <input type="number" id="s" min="0" value="0" />
        </div>
        <div class="input-group">
          <label>Number of A Grades:</label>
          <input type="number" id="a" min="0" value="0" />
        </div>
        <div class="input-group">
          <label>Number of B Grades:</label>
          <input type="number" id="b" min="0" value="0" />
        </div>
        <div class="input-group">
          <label>Number of C Grades:</label>
          <input type="number" id="c" min="0" value="0" />
        </div>
        <div class="input-group">
          <label>Number of D Grades:</label>
          <input type="number" id="d" min="0" value="0" />
        </div>
        <div class="input-group">
          <label>Number of E Grades:</label>
          <input type="number" id="e" min="0" value="0" />
        </div>
        <button onclick="calculateCGPA()">Calculate CGPA</button>
        <div id="result">10.00</div>
      </div>
    </section>

    <!-- Attendance Calculator Section -->
    <section class="calculator-section" id="attendance-calculator">
      <header class="section-hero">
        <h2 class="section-title">Attendance Calculator</h2>
        <p class="section-subtitle">Calculate your attendance and see what it takes to reach 80%! üìä</p>
      </header>
      <div class="calculator attendance-calc">
        <div class="input-group">
          <label>Classes Attended:</label>
          <input type="number" id="attended" min="0" value="0" placeholder="e.g., 40" />
        </div>
        <div class="input-group">
          <label>Total Classes:</label>
          <input type="number" id="total" min="0" value="0" placeholder="e.g., 50" />
        </div>
        <button onclick="calculateAttendance()">Calculate Attendance</button>
        <div id="attendance-result">
          <div class="attendance-percent">0.0%</div>
          <p id="attendance-note">Enter your class details above.</p>
        </div>
      </div>
    </section>

    <!-- Assignment & Tutorials Section -->
    <section class="assignment-section" id="assignment-tutorials">
      <header class="section-hero">
        <h2 class="section-title">Concept map & Assignment & Tutorials</h2>
        <p class="section-subtitle">Access Concept map assignments and tutorials to excel in your coursework. Search and dive in! </p>
      </header>
      <div class="search-wrapper">
        <div class="search-container">
          <input type="text" id="assignment-search" placeholder="Search assignments/tutorials by subject or code... üìñ" class="search-input">
          <span class="search-icon">üìñ</span>
        </div>
      </div>
      <div id="assignmentGrid" class="grid"></div>
    </section>

    <!-- Faculty Section -->
    <section class="faculty-section" id="faculty-section">
      <header class="section-hero">
        <h2 class="section-title">Call Faculty</h2>
        <p class="section-subtitle">Connect with your professors for guidance and support. Search and reach out! üìû</p>
      </header>
      <div class="search-wrapper">
        <div class="search-container">
          <input type="text" id="faculty-search" placeholder="Search faculty by name or course... üîç" class="search-input">
          <span class="search-icon"></span>
        </div>
      </div>
      <div id="facultyGrid" class="faculty-grid"></div>
    </section>

    <!-- Submit Request Section (Contact Us Form) -->
    <section class="request-section" id="submit-request">
      <header class="section-hero">
        <h2 class="section-title">Contact Us - Submit Request</h2>
        <p class="section-subtitle">Request to add phone numbers, faculty, concept maps, or assignments/tutorials. Upload files for maps/assignments! üìß</p>
      </header>
      <div class="calculator request-form">
        <form id="requestForm" enctype="multipart/form-data">
          <div class="input-group">
            <label for="request-type">Request Type:</label>
            <select id="request-type" required>
              <option value="">Select Type</option>
              <option value="phone-number">Add Phone Number</option>
              <option value="faculty">Add Faculty (Name, Rating)</option>
              <option value="concept-map">Add Concept Map (Upload File)</option>
              <option value="assignment">Add Assignment/Tutorial (Upload File)</option>
              <option value="other">Other</option>
            </select>
          </div>

          <!-- Phone Number Fields -->
          <div id="phone-fields" style="display: none;">
            <div class="input-group">
              <label for="phone-number">Phone Number:</label>
              <input type="tel" id="phone-number" placeholder="e.g., +91-7569363309" required />
            </div>
            <div class="input-group">
              <label for="phone-name">Associated Name (e.g., Faculty/Student):</label>
              <input type="text" id="phone-name" placeholder="e.g., Dr. John Doe" required />
            </div>
          </div>

          <!-- Faculty Fields -->
          <div id="faculty-fields" style="display: none;">
            <div class="input-group">
              <label for="faculty-name">Faculty Name:</label>
              <input type="text" id="faculty-name" placeholder="e.g., Dr. John Doe" required />
            </div>
            <div class="input-group">
              <label for="faculty-rating">Rating (1-5):</label>
              <input type="number" id="faculty-rating" min="1" max="5" step="0.1" required />
            </div>
          </div>

          <!-- Upload Fields for Concept Map/Assignment -->
          <div id="upload-fields" style="display: none;">
            <div class="input-group">
              <label for="upload-file">Upload File (PDF/Image):</label>
              <input type="file" id="upload-file" accept=".pdf,.jpg,.jpeg,.png" required />
            </div>
            <div class="input-group">
              <label for="upload-description">File Description (Subject/Code):</label>
              <input type="text" id="upload-description" placeholder="e.g., CSAO9 - Java Concept Map" required />
            </div>
          </div>

          <div class="input-group">
            <label for="user-email">Your Email (must end with @saveetha.com):</label>
            <input type="email" id="user-email" placeholder="yourname@saveetha.com" required pattern=".*@saveetha\.com$" title="Email must end with @saveetha.com" />
          </div>

          <div class="input-group">
            <label for="description">Additional Details:</label>
            <textarea id="description" rows="4" placeholder="More info about your request..." required></textarea>
          </div>

          <button type="submit">Send Request to Admin</button>
        </form>

        <div id="form-message" style="display: none; margin-top: 20px; text-align: center;"></div>
      </div>
    </section>
  </div>
  
  <script src="contributors.js"></script>
  <script src="announcements.js"></script>
  <script src="assignments.js"></script>
  <script src="faculty.js"></script>
  
  <script>
    // Initialize EmailJS (replace with your keys)
    emailjs.init("YOUR_PUBLIC_KEY"); // Your EmailJS Public Key

    // ImgBB API Key for file upload (replace with your free key from imgbb.com)
    const IMGBB_API_KEY = "YOUR_IMGBB_API_KEY";

    // CGPA Calculator
    function calculateCGPA() {
      const s = parseInt(document.getElementById('s').value) || 0;
      const a = parseInt(document.getElementById('a').value) || 0;
      const b = parseInt(document.getElementById('b').value) || 0;
      const c = parseInt(document.getElementById('c').value) || 0;
      const d = parseInt(document.getElementById('d').value) || 0;
      const e = parseInt(document.getElementById('e').value) || 0;

      const totalSubjects = s + a + b + c + d + e;
      if (totalSubjects == 0) {
        document.getElementById('result').innerHTML = '0.00';
        return;
      }

      const totalPoints = (s * 10) + (a * 9) + (b * 8) + (c * 7) + (d * 6) + (e * 5);
      const cgpa = totalPoints / totalSubjects;

      document.getElementById('result').innerHTML = cgpa.toFixed(2);
    }

    calculateCGPA();

    // Attendance Calculator
    function calculateAttendance() {
      const attended = parseInt(document.getElementById('attended').value) || 0;
      const total = parseInt(document.getElementById('total').value) || 0;

      const percent = total > 0 ? ((attended / total) * 100).toFixed(1) : 0.0;

      document.querySelector('.attendance-percent').textContent = `${percent}%`;

      let note = 'Enter your class details above.';
      if (total > 0) {
        if (percent >= 80) {
          note = 'Great job! You\'ve reached 80% attendance! üéâ';
        } else {
          const needed = Math.ceil((0.8 * total) - attended);
          note = needed > 0 ? `Attend ${needed} more classes to reach 80%! üìö` : 'You\'re all set!';
        }
      }
      document.getElementById('attendance-note').textContent = note;
    }

    // Form Type Change Handler
    document.getElementById('request-type').addEventListener('change', function() {
      const type = this.value;
      document.getElementById('phone-fields').style.display = type === 'phone-number' ? 'block' : 'none';
      document.getElementById('faculty-fields').style.display = type === 'faculty' ? 'block' : 'none';
      document.getElementById('upload-fields').style.display = (type === 'concept-map' || type === 'assignment') ? 'block' : 'none';
    });

    // Submit Request Form with File Upload & Email
    document.getElementById('requestForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const type = document.getElementById('request-type').value;
      const email = document.getElementById('user-email').value;
      const description = document.getElementById('description').value;

      if (!email.endsWith('@saveetha.com')) {
        alert('Email must end with @saveetha.com');
        return;
      }

      let extraData = '';
      let fileLink = '';
      if (type === 'phone-number') {
        extraData = `Phone: ${document.getElementById('phone-number').value}, Name: ${document.getElementById('phone-name').value}`;
      } else if (type === 'faculty') {
        extraData = `Name: ${document.getElementById('faculty-name').value}, Rating: ${document.getElementById('faculty-rating').value}`;
      } else if (type === 'concept-map' || type === 'assignment') {
        const fileInput = document.getElementById('upload-file');
        if (fileInput.files.length === 0) {
          alert('Please upload a file for Concept Map or Assignment.');
          return;
        }

        const file = fileInput.files[0];
        const formData = new FormData();
        formData.append('image', file);

        try {
          const uploadResponse = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, {
            method: 'POST',
            body: formData
          });
          const uploadData = await uploadResponse.json();
          if (uploadData.success) {
            fileLink = uploadData.data.url;
            extraData = `Description: ${document.getElementById('upload-description').value}, File Link: ${fileLink}`;
          } else {
            alert('File upload failed. Please try again.');
            return;
          }
        } catch (error) {
          alert('Upload error: ' + error.message);
          return;
        }
      }

      // Prepare EmailJS params
      const params = {
        type: type,
        email: email,
        description: description,
        extra: extraData || 'No additional data',
        to_email: 'yogeshwaroff@gmail.com' // Your email
      };

      // Send email via EmailJS (replace IDs)
      emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', params)
        .then((response) => {
          console.log('SUCCESS!', response.status, response.text);
          document.getElementById('form-message').innerHTML = '<p style="color: green;">Request sent successfully! File link (if any) included. Check your email for confirmation. üéâ</p>';
          document.getElementById('form-message').style.display = 'block';
          this.reset();
          // Hide fields
          document.getElementById('phone-fields').style.display = 'none';
          document.getElementById('faculty-fields').style.display = 'none';
          document.getElementById('upload-fields').style.display = 'none';
        }, (error) => {
          console.log('FAILED...', error);
          document.getElementById('form-message').innerHTML = '<p style="color: red;">Failed to send. Error: ' + error.text + ' üòî</p>';
          document.getElementById('form-message').style.display = 'block';
        });
    });

    // Smooth scroll for dashboard links
    document.querySelectorAll('.dashboard-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href');
        const targetSection = document.querySelector(targetId);
        if (targetSection) {
          targetSection.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });
  </script>
</body>
	  </html>


